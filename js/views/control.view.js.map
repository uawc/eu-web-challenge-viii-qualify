{"version":3,"sources":["..\\..\\..\\src\\js\\views\\control.view.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,CAAC,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,WAAW,EAAE,6BAA6B,CAAC,EACtF,UAAC,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAG;;;AAG5C,QAAO,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;;;AAG3B,WAAS,EAAE,SAAS;;AAEpB,UAAQ,EAAE,SAAS,CAAC,OAAO;;AAE3B,QAAM,EAAE;AACP,mBAAgB,EAAE,UAAU;GAC5B;;;AAGD,YAAU,EAAA,sBAAG;AACZ,OAAI,CAAC,YAAY,EAAE,CAAC;AACpB,OAAI,CAAC,MAAM,EAAE,CAAC;;AAEd,OAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;GAC7D;;;AAGD,QAAM,EAAA,kBAAG;AACR,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAC/B,UAAO,IAAI,CAAC;GACZ;;;;;;AAMD,cAAY,EAAA,wBAAG;AACd,OAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;GAC/C;;;;;;AAMD,UAAQ,EAAA,kBAAC,CAAC,EAAE;AACX,iBAAc,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;GAChE;;;;;;;AAOD,YAAU,EAAA,oBAAC,IAAI,EAAC;AACf,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;GAC1C;;;;;;AAMD,YAAU,EAAA,sBAAG;AACZ,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;GAC/B;;;;;;;;AAQD,YAAU,EAAA,oBAAC,IAAI,EAAE;AAChB,OAAI,CAAC,UAAU,EAAE,CAAC;;AAElB,OAAG;AACF,WAAO,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC;IAC3D,CAAC,OAAM,CAAC,EAAE;AACV,QAAG,CAAC,CAAC,aAAa,EAAE;AACnB,SAAI,CAAC,UAAU,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;KACjC,MAAM;AACN,SAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC;KACrC;IACD;GACD;EACD,CAAC,CAAC;CACH,CAAC,CAAC","file":"control.view.js","sourcesContent":["define(['jquery', 'underscore', 'backbone', 'templates', 'collections/item.collection'],\r\n\t($, _, Backbone, templates, itemCollection)=>{\r\n\r\n\t\t// Main App View\r\n\t\treturn Backbone.View.extend({\r\n\r\n\t\t\t//View element className\r\n\t\t\tclassName: 'control',\r\n\t\t\t//View template\r\n\t\t\ttemplate: templates.control,\r\n\t\t\t//View events\r\n\t\t\tevents: {\r\n\t\t\t\t'keyup textarea': '_onKeyUp'\r\n\t\t\t},\r\n\r\n\t\t\t//Initializing of app.view\r\n\t\t\tinitialize() {\r\n\t\t\t\tthis._addDeBounce();\r\n\t\t\t\tthis.render();\r\n\r\n\t\t\t\tthis.listenTo(itemCollection, 'json:error', this._showError);\r\n\t\t\t},\r\n\r\n\t\t\t//Rendering of app\r\n\t\t\trender() {\r\n\t\t\t\tthis.$el.html(this.template());\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Adding delay for parsing input data\r\n\t\t\t * @private\r\n\t\t\t * */\r\n\t\t\t_addDeBounce() {\r\n\t\t\t\tthis._onKeyUp = _.debounce(this._onKeyUp, 300);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Rebuilding traversal tree on keyUp event\r\n\t\t\t * @private\r\n\t\t\t * */\r\n\t\t\t_onKeyUp(e) {\r\n\t\t\t\titemCollection.fetch(this._parseJSON($(e.currentTarget).val()));\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Showing error\r\n\t\t\t * @private\r\n\t\t\t * @param text {String}\r\n\t\t\t * */\r\n\t\t\t_showError(text){\r\n\t\t\t\tthis.$el.find('.error').text(text).show();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Hiding error\r\n\t\t\t * @private\r\n\t\t\t * */\r\n\t\t\t_hideError() {\r\n\t\t\t\tthis.$el.find('.error').hide();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Parsing data from textarea field\r\n\t\t\t * @private\r\n\t\t\t * @param data - {String}\r\n\t\t\t * @return {Object}\r\n\t\t\t * */\r\n\t\t\t_parseJSON(data) {\r\n\t\t\t\tthis._hideError();\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn itemCollection.validateData(JSON.parse(data || []));\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tif(e.customMessage) {\r\n\t\t\t\t\t\tthis._showError(e.customMessage);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._showError('JSON is not valid');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});"]}